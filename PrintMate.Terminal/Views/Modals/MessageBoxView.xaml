<UserControl x:Class="PrintMate.Terminal.Views.Modals.MessageBoxView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:PrintMate.Terminal.Views.Modals"
             mc:Ignorable="d"
             Width="1024" Height="768"
             d:DesignHeight="768" d:DesignWidth="1024">

    <UserControl.Resources>
        <!-- Базовый стиль для кнопок -->
        <Style x:Key="MessageBoxButton" TargetType="Button">
            <Setter Property="Width" Value="140"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                BorderThickness="0"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1"/>
                            </Border.RenderTransform>
                            <Border.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="2" Opacity="0.4"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.03" ScaleY="1.03"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.97" ScaleY="0.97"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для OK кнопки (оранжевая) -->
        <Style x:Key="OkButton" TargetType="Button" BasedOn="{StaticResource MessageBoxButton}">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#FF8C00" Offset="0"/>
                        <GradientStop Color="#CC7000" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FFA333" Offset="0"/>
                                <GradientStop Color="#E08000" Offset="1"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для Yes кнопки (оранжевая) -->
        <Style x:Key="YesButton" TargetType="Button" BasedOn="{StaticResource MessageBoxButton}">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#FF8C00" Offset="0"/>
                        <GradientStop Color="#CC7000" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FFA333" Offset="0"/>
                                <GradientStop Color="#E08000" Offset="1"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для No кнопки (тёмно-серая) -->
        <Style x:Key="NoButton" TargetType="Button" BasedOn="{StaticResource MessageBoxButton}">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#4a4a4a" Offset="0"/>
                        <GradientStop Color="#333333" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#5a5a5a" Offset="0"/>
                                <GradientStop Color="#444444" Offset="1"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для Cancel кнопки (тёмно-серая) -->
        <Style x:Key="CancelButton" TargetType="Button" BasedOn="{StaticResource MessageBoxButton}">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#3a3a3a" Offset="0"/>
                        <GradientStop Color="#252525" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#4a4a4a" Offset="0"/>
                                <GradientStop Color="#353535" Offset="1"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <!-- Появление с масштабированием -->
                    <DoubleAnimation Storyboard.TargetName="MainBorder"
                                   Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                   From="0.85" To="1" Duration="0:0:0.2">
                        <DoubleAnimation.EasingFunction>
                            <BackEase EasingMode="EaseOut" Amplitude="0.2"/>
                        </DoubleAnimation.EasingFunction>
                    </DoubleAnimation>
                    <DoubleAnimation Storyboard.TargetName="MainBorder"
                                   Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                   From="0.85" To="1" Duration="0:0:0.2">
                        <DoubleAnimation.EasingFunction>
                            <BackEase EasingMode="EaseOut" Amplitude="0.2"/>
                        </DoubleAnimation.EasingFunction>
                    </DoubleAnimation>
                    <!-- Появление с прозрачностью -->
                    <DoubleAnimation Storyboard.TargetName="MainBorder"
                                   Storyboard.TargetProperty="Opacity"
                                   From="0" To="1" Duration="0:0:0.15"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </UserControl.Triggers>

    <!-- Основной контейнер -->
    <Border x:Name="MainBorder"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            CornerRadius="12"
            Width="520"
            MinHeight="260"
            MaxHeight="480"
            RenderTransformOrigin="0.5,0.5">
        <Border.RenderTransform>
            <ScaleTransform ScaleX="1" ScaleY="1"/>
        </Border.RenderTransform>

        <!-- Тёмный фон -->
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#1a1a1a" Offset="0"/>
                <GradientStop Color="#121212" Offset="0.5"/>
                <GradientStop Color="#0a0a0a" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>

        <!-- Тень -->
        <Border.Effect>
            <DropShadowEffect Color="#000000"
                            BlurRadius="40"
                            ShadowDepth="0"
                            Opacity="0.8"/>
        </Border.Effect>

        <!-- Рамка с оранжевым акцентом -->
        <Border CornerRadius="12" BorderThickness="1">
            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#4a3520" Offset="0"/>
                    <GradientStop Color="#2a2a2a" Offset="0.5"/>
                    <GradientStop Color="#3a2a1a" Offset="1"/>
                </LinearGradientBrush>
            </Border.BorderBrush>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Заголовок с оранжевой полосой сверху -->
                <Border Grid.Row="0" CornerRadius="12,12,0,0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#1f1a15" Offset="0"/>
                            <GradientStop Color="#181410" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>

                    <Grid>
                        <!-- Оранжевая полоса сверху -->
                        <Border VerticalAlignment="Top" Height="3" CornerRadius="12,12,0,0">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#CC7000" Offset="0"/>
                                    <GradientStop Color="#FF8C00" Offset="0.5"/>
                                    <GradientStop Color="#CC7000" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>

                        <StackPanel Orientation="Horizontal" Margin="25,22,25,18">
                            <!-- Иконка в заголовке -->
                            <Border Width="32"
                                    Height="32"
                                    CornerRadius="6"
                                    Margin="0,0,12,0"
                                    VerticalAlignment="Center"
                                    Visibility="{Binding IconVisibility}">
                                <Border.Background>
                                    <SolidColorBrush Color="{Binding IconBackgroundColor}"/>
                                </Border.Background>
                                <TextBlock Text="{Binding IconText}"
                                          FontSize="16"
                                          FontWeight="Bold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                            </Border>

                            <!-- Заголовок -->
                            <TextBlock Text="{Binding Title}"
                                      FontSize="20"
                                      FontWeight="SemiBold"
                                      Foreground="#f0f0f0"
                                      VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Разделитель -->
                <Rectangle Grid.Row="0" VerticalAlignment="Bottom" Height="1">
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#1a1a1a" Offset="0"/>
                            <GradientStop Color="#3a3a3a" Offset="0.5"/>
                            <GradientStop Color="#1a1a1a" Offset="1"/>
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>

                <!-- Содержимое -->
                <Grid Grid.Row="1" Margin="25,22,25,22">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Большая иконка -->
                    <Border Grid.Column="0"
                            Width="60"
                            Height="60"
                            CornerRadius="30"
                            Margin="0,0,20,0"
                            VerticalAlignment="Top"
                            Visibility="{Binding IconVisibility}">
                        <Border.Background>
                            <SolidColorBrush Color="{Binding IconBackgroundColor}"/>
                        </Border.Background>
                        <Border.Effect>
                            <DropShadowEffect Color="{Binding IconBackgroundColor}" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                        </Border.Effect>
                        <TextBlock Text="{Binding IconText}"
                                  FontSize="28"
                                  FontWeight="Bold"
                                  Foreground="White"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                    </Border>

                    <!-- Текст сообщения -->
                    <ScrollViewer Grid.Column="1"
                                 VerticalScrollBarVisibility="Auto"
                                 HorizontalScrollBarVisibility="Disabled">
                        <TextBlock Text="{Binding Message}"
                                  FontSize="16"
                                  Foreground="#b0b0b0"
                                  TextWrapping="Wrap"
                                  VerticalAlignment="Center"
                                  LineHeight="24"/>
                    </ScrollViewer>
                </Grid>

                <!-- Кнопки -->
                <Border Grid.Row="2" CornerRadius="0,0,12,12" Padding="25,18">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#141414" Offset="0"/>
                            <GradientStop Color="#0c0c0c" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <!-- Кнопка OK -->
                        <Button Content="OK"
                                Command="{Binding OkCommand}"
                                Visibility="{Binding OkButtonVisibility}"
                                Style="{StaticResource OkButton}"
                                Margin="0,0,10,0"/>

                        <!-- Кнопка Да -->
                        <Button Content="Да"
                                Command="{Binding YesCommand}"
                                Visibility="{Binding YesButtonVisibility}"
                                Style="{StaticResource YesButton}"
                                Margin="0,0,10,0"/>

                        <!-- Кнопка Нет -->
                        <Button Content="Нет"
                                Command="{Binding NoCommand}"
                                Visibility="{Binding NoButtonVisibility}"
                                Style="{StaticResource NoButton}"
                                Margin="0,0,10,0"/>

                        <!-- Кнопка Отмена -->
                        <Button Content="Отмена"
                                Command="{Binding CancelCommand}"
                                Visibility="{Binding CancelButtonVisibility}"
                                Style="{StaticResource CancelButton}"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Border>
</UserControl>
