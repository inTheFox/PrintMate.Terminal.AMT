# Log Viewer App

Красивое WPF приложение для просмотра логов в реальном времени из LoggingService.

## Возможности

- **Автоматическое обновление логов** через SignalR в реальном времени
- **Фильтрация по приложению** - выбор конкретного приложения из списка
- **Фильтрация по уровню логирования** - Trace, Debug, Information, Warning, Error, Critical
- **Поиск по тексту** - поиск по сообщению, категории или исключению
- **Цветовая индикация** уровней логов:
  - Trace - серый
  - Debug - синий
  - Information - зеленый
  - Warning - оранжевый
  - Error - красный
  - Critical - темно-красный
- **Автоматическое переподключение** при отключении сервиса логирования
- **Индикатор подключения** в реальном времени
- **Авто-прокрутка** к новым логам
- **Виртуализация** для производительности (до 10000 записей в памяти)

## Технологии

- .NET 9.0
- WPF
- Prism.DryIoc 8.1.97
- HandyControl 3.5.1 (Material Design UI)
- SignalR Client 9.0.0

## Архитектура

Приложение построено по паттерну MVVM с использованием Prism:

```
LogViewerApp/
├── Services/
│   └── LoggingHubService.cs      # SignalR подключение
├── ViewModels/
│   └── MainViewModel.cs          # Главный ViewModel
├── Views/
│   └── MainView.xaml             # Главный View
├── Models/
│   └── LogEntryViewModel.cs      # Модель лога для UI
├── Converters/
│   └── LogLevelToBrushConverter.cs # Конвертер цветов
└── Bootstrapper.cs               # Prism DI и навигация
```

## Запуск

### Сборка
```bash
cd E:\PrintMate\UtilsApps\LogViewerApp
dotnet build
```

### Запуск
```bash
dotnet run
```

Или запустите скомпилированный exe:
```bash
E:\PrintMate\UtilsApps\LogViewerApp\bin\Debug\net9.0-windows\LogViewerApp.exe
```

## Требования

1. **LoggingService должен быть запущен** на `http://localhost:5201`
2. .NET 9.0 Runtime

## Как использовать

1. Запустите LoggingService
2. Запустите LogViewerApp
3. Приложение автоматически подключится к LoggingService
4. Логи начнут появляться в реальном времени
5. Используйте фильтры для поиска нужных логов

### Фильтры

- **Поиск** - вводите текст для поиска по сообщению, категории или исключению
- **Приложение** - выберите конкретное приложение или "Все"
- **Уровень** - выберите минимальный уровень логирования (например, только Warning и выше)
- **Авто-прокрутка** - включите/выключите автоматическую прокрутку к новым логам

### Кнопки

- **Переподключить** - переподключиться к LoggingService вручную
- **Очистить** - очистить все логи из памяти

## Обработка ошибок

Если LoggingService недоступен:
- Приложение покажет статус "Отключено" (красный индикатор)
- Автоматически попытается переподключиться каждые 10 секунд
- Приложение не упадет и продолжит работать
- После восстановления подключения автоматически возобновит получение логов

## Производительность

- Используется виртуализация DataGrid для быстрого отображения
- Максимум 10000 логов в отображаемом списке (старые автоматически удаляются)
- Все логи сохраняются в памяти для фильтрации
- Многопоточная обработка через Dispatcher
