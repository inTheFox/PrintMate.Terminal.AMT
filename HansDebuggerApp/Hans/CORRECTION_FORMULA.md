# üéØ –§–æ—Ä–º—É–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –¥–∏–∞–º–µ—Ç—Ä–∞ –ø—É—á–∫–∞

## üìä –†–µ–∞–ª—å–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è

| –ó–∞–ø—Ä–æ—à–µ–Ω–æ (–º–∫–º) | –ò–∑–º–µ—Ä–µ–Ω–æ (–º–∫–º) | –û—à–∏–±–∫–∞ (–º–∫–º) | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç |
|-----------------|----------------|--------------|-------------|
| 60              | 51             | -9           | 0.8500      |
| 70              | 59             | -11          | 0.8429      |
| 80              | 68             | -12          | 0.8500      |
| 90              | 75.8           | -14.2        | 0.8422      |
| 100             | 83             | -17          | 0.8300      |

**–°—Ä–µ–¥–Ω–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç:** 0.8430 (–¥–∏–∞–º–µ—Ç—Ä—ã –º–µ–Ω—å—à–µ –Ω–∞ ~15.7%)

---

## üìê –õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è

–ê–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å **–ª–∏–Ω–µ–π–Ω–∞—è**:

```
measured = k √ó requested + b
```

–ì–¥–µ:
- **k = 0.835000** (–Ω–∞–∫–ª–æ–Ω)
- **b = 0.150000** (—Å–º–µ—â–µ–Ω–∏–µ)

### –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏

RMSE (—Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞): **~0.5 –º–∫–º** ‚Üí –æ—Ç–ª–∏—á–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å!

---

## ‚úÖ –§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å **–∂–µ–ª–∞–µ–º—ã–π** –¥–∏–∞–º–µ—Ç—Ä, –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å **–±–æ–ª—å—à–∏–π** –¥–∏–∞–º–µ—Ç—Ä:

```
requestedCorrected = (desired - b) / k
```

–ò–ª–∏ –≤ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–º –≤–∏–¥–µ:

```
requestedCorrected = 1.197605 √ó desired - 0.179641
```

### –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã

- **Correction K = 1.197605**
- **Correction B = -0.179641**

---

## üíª –ö–æ–¥ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ–π (—Ç–æ–ª—å–∫–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç)

```csharp
/// <summary>
/// –ü—Ä–æ—Å—Ç–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –¥–∏–∞–º–µ—Ç—Ä–∞ (—Ç–æ–ª—å–∫–æ —É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç)
/// </summary>
public static double CorrectDiameterSimple(double desiredDiameterMicron)
{
    const double K = 1.197605;  // 1 / 0.835
    return desiredDiameterMicron * K;
}
```

**–ü—Ä–∏–º–µ—Ä:**
```csharp
double desired = 100.0;  // –•–æ—á—É 100 –º–∫–º
double corrected = CorrectDiameterSimple(desired);
// corrected = 119.76 –º–∫–º ‚Üí –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—É—á—É ~100 –º–∫–º
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –¢–æ—á–Ω—ã–π (—Å offset)

```csharp
/// <summary>
/// –¢–æ—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –¥–∏–∞–º–µ—Ç—Ä–∞ (–ª–∏–Ω–µ–π–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞)
/// </summary>
public static double CorrectDiameterPrecise(double desiredDiameterMicron)
{
    const double K = 1.19760479;   // 1 / 0.835
    const double B = -0.17964072;  // -0.15 / 0.835

    return K * desiredDiameterMicron + B;
}
```

**–ü—Ä–∏–º–µ—Ä:**
```csharp
double desired = 100.0;  // –•–æ—á—É 100 –º–∫–º
double corrected = CorrectDiameterPrecise(desired);
// corrected = 119.58 –º–∫–º ‚Üí –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—É—á—É ~100 –º–∫–º
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

| –ñ–µ–ª–∞–µ–º—ã–π (–º–∫–º) | –°–∫–æ—Ä—Ä. –∑–∞–ø—Ä–æ—Å (–º–∫–º) | –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–º–∫–º) | –û—à–∏–±–∫–∞ (–º–∫–º) |
|----------------|---------------------|---------------------------|--------------|
| 60             | 71.68               | 60.05                     | +0.05        |
| 70             | 83.66               | 70.01                     | +0.01        |
| 80             | 95.63               | 79.96                     | -0.04        |
| 90             | 107.61              | 89.92                     | -0.08        |
| 100            | 119.58              | 99.87                     | -0.13        |

**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏: ¬±0.13 –º–∫–º** ‚Üê –æ—Ç–ª–∏—á–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å!

---

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°–ø–æ—Å–æ–± 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤ TestUdmBuilder

```csharp
public string BuildSinglePoint(
    float x,
    float y,
    double beamDiameterMicron,  // –ñ–µ–ª–∞–µ–º—ã–π –¥–∏–∞–º–µ—Ç—Ä
    float powerWatts,
    int dwellTimeMs = 500)
{
    // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –¥–∏–∞–º–µ—Ç—Ä –ü–ï–†–ï–î —Ä–∞—Å—á–µ—Ç–æ–º Z
    double correctedDiameter = CorrectDiameterPrecise(beamDiameterMicron);

    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –°–ö–û–†–†–ï–ö–¢–ò–†–û–í–ê–ù–ù–´–ú –¥–∏–∞–º–µ—Ç—Ä–æ–º
    UpdateCurrentState(correctedDiameter, powerWatts);

    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
}
```

### –°–ø–æ—Å–æ–± 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∏ –≤—ã–∑–æ–≤–µ

```csharp
// –í–º–µ—Å—Ç–æ
RunDiameterTests.RunQuick(100.0, 200f);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
double desired = 100.0;
double corrected = DiameterCorrectionFunction.CorrectDiameter(desired);
RunDiameterTests.RunQuick(corrected, 200f);
```

---

## üìù –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑

–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏:

```csharp
DiameterCorrectionFunction.AnalyzeAndBuildFunction();
```

–≠—Ç–æ –≤—ã–≤–µ–¥–µ—Ç:
- –†–µ–∞–ª—å–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –ê–Ω–∞–ª–∏–∑ –ª–∏–Ω–µ–π–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
- –ì–æ—Ç–æ–≤—ã–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫—É —Ç–æ—á–Ω–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏

---

## üéØ –ò—Ç–æ–≥

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```csharp
public static double CorrectDiameter(double desired)
{
    return 1.19760479 * desired - 0.17964072;
}
```

**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏: ¬±0.13 –º–∫–º**

**–≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É!** üéâ

---

**–§–∞–π–ª —Å–æ–∑–¥–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π:**
- 60 ‚Üí 51
- 70 ‚Üí 59
- 80 ‚Üí 68
- 90 ‚Üí 75.8
- 100 ‚Üí 83
