# ‚úÖ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´: K_FACTOR_AXES_Z

## üîç –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º:** –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–º–µ—Ç—Ä–∞ –ø—É—á–∫–∞ (65, 85, 95, 500 –º–∫–º), —Ä–µ–∞–ª—å–Ω—ã–π –∏–∑–º–µ—Ä–µ–Ω–Ω—ã–π –¥–∏–∞–º–µ—Ç—Ä –≤—Å–µ–≥–¥–∞ –±—ã–ª ‚âà50 –º–∫–º.

**–ü—Ä–∏—á–∏–Ω–∞:** Z –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∞—Å—å –≤ `UDM_AddPoint2D` **–±–µ–∑ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è**.

## üéØ –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã

–í Java –∫–æ–¥–µ `UdmProducer.java` (—Å—Ç—Ä–æ–∫–∏ 27-28):

```java
// –ö–æ–º–∞–Ω–¥—ã UDM_JUMP –∏ AddPoint2D –ø–µ—Ä–µ–º–µ—â–∞—é—Ç –æ—Å—å Z –≤ 4 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ —á–µ–º AddPolyline3D
private static final int K_FACTOR_AXES_Z = 4;
```

–ò –¥–∞–ª–µ–µ (—Å—Ç—Ä–æ–∫–∞ 149):

```java
float newZ = (float) (transformedCoord[2] * K_FACTOR_AXES_Z);
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:** SDK Hans GMC —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

- `UDM_AddPolyline3D` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç Z –≤ –º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö
- `UDM_AddPoint2D` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç Z –≤ **—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö** (–≤ 4 —Ä–∞–∑–∞ –º–µ–Ω—å—à–∏—Ö —á–µ–º –º–º)
- `UDM_Jump` - —Ç–∞–∫–∂–µ —Ç—Ä–µ–±—É–µ—Ç Z√ó4

–ü–æ—ç—Ç–æ–º—É –¥–ª—è `UDM_AddPoint2D` –Ω—É–∂–Ω–æ —É–º–Ω–æ–∂–∞—Ç—å Z –Ω–∞ 4!

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–í `TestUdmBuilder.cs` –¥–æ–±–∞–≤–ª–µ–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:

```csharp
const float K_FACTOR_AXES_Z = 4.0f;

structUdmPos point = new structUdmPos
{
    x = x,
    y = y,
    z = zCoord * K_FACTOR_AXES_Z,  // –£–º–Ω–æ–∂–∞–µ–º Z –Ω–∞ 4!
    a = 0
};

UDM_AddPoint2D(point, dwellTimeMs, 0);
```

## üìä –ü—Ä–∏–º–µ—Ä—ã (–¥–æ –∏ –ø–æ—Å–ª–µ)

### –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

| –ó–∞–ø—Ä–æ—à–µ–Ω–æ (–º–∫–º) | –†–∞—Å—á–µ—Ç–Ω–∞—è Z (–º–º) | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ SDK (–º–º) | –ò–∑–º–µ—Ä–µ–Ω–æ (–º–∫–º) |
|-----------------|------------------|-----------------------|----------------|
| 65              | 0.0020           | 0.0020                | ~50            |
| 85              | 0.0050           | 0.0050                | ~50            |
| 95              | 0.0070           | 0.0070                | ~50            |
| 500             | 0.5000           | 0.5000                | ~50            |

–°–∫–∞–Ω–µ—Ä –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–ª Z=0.0020 –º–º –∫–∞–∫ Z=0.0005 –º–º (–≤ 4 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ) ‚Üí –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ–∫—É—Å!

### –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

| –ó–∞–ø—Ä–æ—à–µ–Ω–æ (–º–∫–º) | –†–∞—Å—á–µ—Ç–Ω–∞—è Z (–º–º) | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ SDK (–º–º) | –†–µ–∞–ª—å–Ω–∞—è Z (–º–º) | –û–∂–∏–¥–∞–µ–º—ã–π –¥–∏–∞–º–µ—Ç—Ä (–º–∫–º) |
|-----------------|------------------|-----------------------|-----------------|-------------------------|
| 65              | 0.0020           | 0.0080                | 0.0020          | ~65                     |
| 85              | 0.0050           | 0.0200                | 0.0050          | ~85                     |
| 95              | 0.0070           | 0.0280                | 0.0070          | ~95                     |
| 500             | 0.5000           | 2.0000                | 0.5000          | ~500                    |

–¢–µ–ø–µ—Ä—å —Å–∫–∞–Ω–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç Z –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É!

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –§–∞–π–ª: `TestUdmBuilder.cs`

1. **–°—Ç—Ä–æ–∫–∞ 103-119**: –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ `BuildSinglePoint(x, y, beamDiameter, ...)`
   - –î–æ–±–∞–≤–ª–µ–Ω `K_FACTOR_AXES_Z = 4.0f`
   - Z –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ 4 –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ `UDM_AddPoint2D`

2. **–°—Ç—Ä–æ–∫–∞ 173-188**: –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –¥–ª—è —Ä—É—á–Ω–æ–π Z `BuildSinglePoint(x, y, z, beamDiameter, ...)`
   - –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ —É–º–Ω–æ–∂–µ–Ω–∏–µ Z –Ω–∞ 4

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–æ—á–µ–º—É –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 4?

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å SDK Hans GMC:

- –î–ª—è 3D –æ–ø–µ—Ä–∞—Ü–∏–π (`UDM_AddPolyline3D`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω Z –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- –î–ª—è 2D –æ–ø–µ—Ä–∞—Ü–∏–π —Å Z (`UDM_AddPoint2D`, `UDM_Jump`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–º–µ–Ω—å—à–µ–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 4 –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

### –ü–æ—á–µ–º—É —ç—Ç–æ –Ω–µ –±—ã–ª–æ –∑–∞–º–µ—Ç–Ω–æ –≤ Java –∫–æ–¥–µ?

–í Java –∫–æ–¥–µ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `UdmProducer.java`:

```java
// –î–ª—è Point2D (line 149)
float newZ = (float) (transformedCoord[2] * K_FACTOR_AXES_Z);

// –î–ª—è Polyline3D (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç transformedCoord[2] –Ω–∞–ø—Ä—è–º—É—é)
```

–ü—Ä–∏ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞ C# —ç—Ç–æ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –±—ã–ª —É–ø—É—â–µ–Ω.

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:
   ```csharp
   RunDiameterTests.RunQuick(100.0, 200f);  // –¢–µ—Å—Ç —Å 100 –º–∫–º
   ```
3. –ü—Ä–æ–∂–≥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ—á–∫–∏ –∏ –∏–∑–º–µ—Ä—å—Ç–µ –¥–∏–∞–º–µ—Ç—Ä—ã
4. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –¥–∏–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–º ¬±10%

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º –≤—ã–≤–æ–¥–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞:

```
‚ö†Ô∏è UDM_AddPoint2D —Ç—Ä–µ–±—É–µ—Ç Z√ó4: 0.019731 ‚Üí 0.078924 –º–º
```

–≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —á—Ç–æ Z –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è.

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-01-XX
**–°—Å—ã–ª–∫–∞ –Ω–∞ Java –∫–æ–¥:** `hans-dev/Hans4Java/src/org/iiv/hlssystem/multi/UdmProducer.java` lines 27-28, 149
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:** `HansDebuggerApp/Hans/TestUdmBuilder.cs`
