# focalLengthMm - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

## üéØ –ß—Ç–æ —ç—Ç–æ?

```json
"beamConfig": {
  "focalLengthMm": 538.46  // ‚Üê –§–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ F-theta –ª–∏–Ω–∑—ã
}
```

**538.46 mm** - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ª–∏–Ω–∑—ã –¥–æ —Ä–∞–±–æ—á–µ–π –ø–ª–æ—Å–∫–æ—Å—Ç–∏.

---

## ‚úÖ –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

### 1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**

```csharp
ScannerValidator validator = new ScannerValidator(beamConfig, scannerConfig);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–æ—á–∫–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ø–æ–ª—è
bool valid = validator.IsPointValid(x, y);  // true/false
```

### 2. **–†–∞—Å—á–µ—Ç —É–≥–ª–æ–≤**

```
–£–≥–æ–ª (—Ä–∞–¥–∏–∞–Ω—ã) = –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ (mm) / focalLength (mm)
```

```csharp
double angle = validator.CalculateAngle(200);  // 0.371 rad ‚âà 21.3¬∞
```

### 3. **–†–∞—Å—á–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**

```csharp
double resolution = validator.CalculateResolution(16);  // 6.1 Œºm
```

–î–ª—è 16-bit –≥–∞–ª—å–≤–æ —Å –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–æ–π: **—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ ‚âà 6 Œºm**

### 4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Rayleigh Length**

```csharp
AdvancedBeamConfig advBeam = new AdvancedBeamConfig { /* ... */ };
advBeam.ValidateRayleighLength();

// Output:
//   Theoretical: 1926.4 Œºm  (–∏–∑ —Ñ–æ—Ä–º—É–ª—ã)
//   Configured:  1426.7 Œºm  (–∏–∑ config JSON)
//   Difference:  -499.7 Œºm (-25.9%)
//   ‚úÖ OK: Experimental calibration
```

### 5. **–£–ª—É—á—à–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç Z** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ù–∞ –∫—Ä–∞—é –ø–æ–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è `z_R` –±–æ–ª—å—à–µ –Ω–∞ ~5%:

```csharp
double zR_center = beamConfig.RayleighLengthMicron;          // 1426.7 Œºm
double zR_edge = advBeam.CalculateEffectiveRayleighLength(200, 0);  // 1499.3 Œºm (+5%)
```

---

## üìä –ö–ª—é—á–µ–≤—ã–µ —Ñ–æ—Ä–º—É–ª—ã

```
1. Field size:     Field = f √ó Œ∏_max
2. Angle:          Œ∏ = x / f
3. Resolution:     step = f √ó Œ∏_min
4. Max angle:      Œ∏_max = (Field/2) / f
```

---

## üìê –î–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| Focal length | **538.46 mm** |
| Field size | 400 √ó 400 mm |
| Max angle | **0.371 rad** (21.3¬∞) |
| Resolution (16-bit) | **6.1 Œºm** |
| Max coordinate | ¬±200 mm |

---

## üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä: –í–∞–ª–∏–¥–∞—Ü–∏—è CLI –≥–µ–æ–º–µ—Ç—Ä–∏–∏

```csharp
// –°–æ–∑–¥–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä
ScannerValidator validator = new ScannerValidator(beamConfig, scannerConfig);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–µ–æ–º–µ—Ç—Ä–∏—é –∏–∑ CLI
List<CliPoint> points = ParseCliFile("file.cli");

bool valid = validator.ValidateGeometry(points);

if (!valid)
{
    Console.WriteLine("‚ùå ERROR: Geometry is outside scan field!");
    return;
}

// –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é...
```

---

## ‚ùì FAQ

### Q: –ü–æ—á–µ–º—É –º—ã —Ä–∞–Ω—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `focalLengthMm`?

**A:** –î–ª—è **–±–∞–∑–æ–≤–æ–≥–æ** —Ä–∞—Å—á–µ—Ç–∞ Z-offset –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ `minBeamDiameterMicron` –∏ `rayleighLengthMicron`.

–ù–æ `focalLengthMm` –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è:
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –£–ª—É—á—à–µ–Ω–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤

### Q: –ù—É–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç Z?

**A:** **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**. –†–∞–∑–Ω–∏—Ü–∞ ~5% –Ω–∞ –∫—Ä–∞—é –ø–æ–ª—è. Hans firmware –º–æ–∂–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ **–±–∞–∑–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω**:
```csharp
z = beamConfig.CalculateZOffset(cliDiameter);  // ‚úÖ OK
```

### Q: –ß—Ç–æ –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –≤–Ω–µ –ø–æ–ª—è?

**A:** Hans –Ω–µ —Å–º–æ–∂–µ—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Ç–æ—á–∫—É. –ì–∞–ª—å–≤–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Ç–∞–∫–æ–π —É–≥–æ–ª.

**–†–µ—à–µ–Ω–∏–µ:** –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≥–µ–æ–º–µ—Ç—Ä–∏—é **–î–û** –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ Hans:
```csharp
if (!validator.IsPointValid(x, y))
{
    // –û–±—Ä–µ–∑–∞—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –≥–µ–æ–º–µ—Ç—Ä–∏—é
}
```

---

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:

1. **–í–∞–ª–∏–¥–∞—Ü–∏–∏ CLI** –ø–µ—Ä–µ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π
2. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** –ø—Ä–æ–±–ª–µ–º —Å –≥–µ–æ–º–µ—Ç—Ä–∏–µ–π
3. **–ü—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–æ—Ä–∏–∏)
4. **–†–∞—Å—á–µ—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫** —Å–∏—Å—Ç–µ–º—ã

### ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:

1. **–ë–∞–∑–æ–≤–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ Z-offset** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `rayleighLengthMicron`
2. **–ü—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ UDM API** - Hans –¥–µ–ª–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üìÅ –§–∞–π–ª—ã

- **[Hans_FocalLength_Usage.md](Hans_FocalLength_Usage.md)** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
- **[Hans_FocalLength_Examples.cs](Hans_FocalLength_Examples.cs)** - —Ä–∞–±–æ—á–∏–µ –ø—Ä–∏–º–µ—Ä—ã

---

## ‚úÖ –ò—Ç–æ–≥

`focalLengthMm` = **538.46 mm** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ focalLengthMm = 538.46 mm           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç               ‚îÇ
‚îÇ ‚Üí –†–∞—Å—á–µ—Ç —É–≥–ª–æ–≤                      ‚îÇ
‚îÇ ‚Üí –†–∞—Å—á–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (6.1 Œºm)        ‚îÇ
‚îÇ ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏             ‚îÇ
‚îÇ ‚Üí (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£–ª—É—á—à–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç Z ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏!** ‚úÖ

---

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025
